<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="canvas" width="500" height="300"></canvas>
    <script>
        window.onload = function() {
    let canvas = document.querySelector('#canvas');
    let context = canvas.getContext('2d');
    let baseRecurrenceInterval = 1000 / 60;
    let lastRecurrenceTime = 0;
    let timeSinceLastRecurrence = 0;
    let maxSpeed = 6;

    let square = {
        x: 25,
        y: 25,
        speedX: -2,
        speedXY: 2,
        side: 50,
        color: 'red',
        baseSpeed: 2,
        speedAdjustment: 1
    };

    function loop() {
        shift();
        redraw();
        requestAnimationFrame(loop); // We have added this line

    }

    function shift() {
        if (square.x + square.side + square.speedX > canvas.width) square.speedX *= -1;
        else if (square.x + square.speedX < 0) square.speedX *= -1;

        if (square.y + square.side + square.speedY > canvas.height) square.speedY *= -1;
        else if (square.y + square.speedY < 0) square.speedY *= -1;

        square.x += square.speedX;
        square.y += square.speedY;
    }

    function redraw() {
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.fillStyle = square.color;
        context.fillRect(square.x, square.y, square.side, square.side);
    }

    requestAnimationFrame(loop); // We have edited this line
};
    </script>
</body>
</html>